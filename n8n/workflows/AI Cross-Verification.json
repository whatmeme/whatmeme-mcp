{
  "name": "AI Cross-Verification (GPT/Gemini/Cursor)",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "verify-chat",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "6e172ba1-9112-4d24-a630-32c5cfffd3f5",
      "name": "Webhook (From MCP)",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [
        0,
        0
      ],
      "webhookId": "verify-chat-webhook"
    },
    {
      "parameters": {
        "resource": "chat",
        "model": "gpt-4o-mini",
        "prompt": {
          "messages": [
            {
              "role": "system",
              "content": "ì‚¬ìš©ìì˜ [ì§ˆë¬¸]ê³¼ AIì˜ [ë‹µë³€]ì´ ì£¼ì–´ì ¸.\n\në‚´ìš©ì´ ë§ëŠ”ì§€ í‹€ë¦°ê²ƒ ë³´ë‹¤, ë‹µë³€ì´ ì§ˆë¬¸ì˜ ì˜ë„ë¥¼ ì œëŒ€ë¡œ ì´í•´í–ˆëŠ”ì§€, ê·¸ë¦¬ê³  ë‹µë³€ì´ ì–´ë–¤ ì „ì œë¥¼ ê¹”ê³  ì „ê°œëëŠ”ì§€ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ë¶„ì„í•´.\n\n## ë¶„ì„ ê¸°ì¤€\n\n- ì§ˆë¬¸ì˜ ëª©ì ê³¼ ë‹µë³€ì˜ ë°©í–¥ì´ ë§ëŠ”ì§€ê°€ í•µì‹¬ì´ì•¼.\n- ë‹µë³€ì´ ì•”ë¬µì ìœ¼ë¡œ ê°€ì •í•˜ê³  ìˆëŠ” ì „ì œê°€ ë¬´ì—‡ì¸ì§€ ë“œëŸ¬ë‚´.\n\n## ì¶œë ¥ í˜•ì‹\n\n1. ì§ˆë¬¸ ì˜ë„ íŒŒì•…\n   - ì‚¬ìš©ìê°€ ì´ ì§ˆë¬¸ì„ í†µí•´ ë¬´ì—‡ì„ ì–»ê³  ì‹¶ì–´ í–ˆëŠ”ì§€.\n\n2. ë‹µë³€ì˜ í•µì‹¬ ë…¼ë¦¬\n   - ë‹µë³€ì´ ì–´ë–¤ ì „ì œì™€ ë…¼ë¦¬ë¥¼ ë°”íƒ•ìœ¼ë¡œ êµ¬ì„±ëëŠ”ì§€ ìš”ì•½í•´.\n\n3. ì ì¬ì  ëˆ„ë½ ì‚¬í•­\n   - ì§ˆë¬¸ ì˜ë„ ëŒ€ë¹„ ë‹µë³€ì—ì„œ ë‹¤ë£¨ì§€ ì•Šì€ ë¶€ë¶„ì´ë‚˜ ì• ë§¤í•˜ê²Œ ë„˜ì–´ê°„ ì „ì œê°€ ìˆë‹¤ë©´ ì§€ì í•´."
            },
            {
              "content": "=User Question:\n{{ $json.body.user_question }}\n\nAI Answer:\n{{ $json.body.ai_answer }}"
            }
          ]
        },
        "options": {},
        "requestOptions": {}
      },
      "id": "2c75cc7a-93b6-4ea3-bab8-d9be41ca6a53",
      "name": "GPT-4o Analyst",
      "type": "n8n-nodes-base.openAi",
      "typeVersion": 1,
      "position": [
        224,
        0
      ],
      "credentials": {
        "openAiApi": {
          "id": "vKeiPygfhvujKlE2",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "models/gemini-2.5-flash",
          "mode": "list",
          "cachedResultName": "models/gemini-2.5-flash"
        },
        "messages": {
          "values": [
            {
              "content": "=GPT-4oì˜ 1ì°¨ ë¶„ì„ì„ ì°¸ê³ í•˜ë˜, ì½”ë“œì˜ ë§¥ë½(Context)ì„ ê³ ë ¤í•´ì„œ ìœ ì—°í•˜ê²Œ ê²€ì¦í•´.\n\n## ê²€ì¦ ì›ì¹™ (Review Guidelines)\n\n### 1. ë§¥ë½ ìš°ì„ \nì‚¬ìš©ìê°€ \"ê°„ë‹¨í•œ ì˜ˆì œ\", \"ë¹ ë¥´ê²Œ ì§œì¤˜\"ë¼ê³  ìš”ì²­í•œ ê²½ìš°ì—ëŠ”  \nêµ¬ì¡°ê°€ ë‹¨ìˆœí•˜ê±°ë‚˜ ì˜ˆì™¸ ì²˜ë¦¬ê°€ ë¶€ì¡±í•´ë„ PASS í•´ë„ ë¼.  \në‹¤ë§Œ ì‹¤ì œ ë³´ì•ˆ ì‚¬ê³ ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆëŠ” ë¬¸ì œëŠ” ì˜ˆì™¸ ì—†ì´ FAIL ì²˜ë¦¬í•´.\n\n### 2. FAIL vs WARNING íŒë‹¨ ê¸°ì¤€\nì•„ë˜ ì¤‘ í•˜ë‚˜ë¼ë„ í•´ë‹¹í•˜ë©´ FAILì´ì•¼.\n\n- ì½”ë“œê°€ ì‹¤í–‰ ìì²´ê°€ ë¶ˆê°€ëŠ¥í•œ ê²½ìš°  \n  (ë¬¸ë²• ì˜¤ë¥˜, ë¬´í•œ ë£¨í”„ ë“±)\n- ì‹¤ì œ ë³´ì•ˆ ì‚¬ê³ ë¡œ ì§ê²°ë  ìˆ˜ ìˆëŠ” ì·¨ì•½ì   \n  (SQL Injection, XSS, ì‹¤ì‚¬ìš© ê°€ëŠ¥í•œ ë¹„ë°€ë²ˆí˜¸ / API Key / Secret ë…¸ì¶œ)\n- ì‚¬ìš©ìê°€ ëª…ì‹œí•œ í•µì‹¬ ìš”êµ¬ì‚¬í•­ì„ ì „í˜€ ì¶©ì¡±í•˜ì§€ ëª»í•œ ê²½ìš°\n\nì½”ë“œëŠ” ë™ì‘í•˜ì§€ë§Œ ìš´ì˜ í™˜ê²½ì—ì„œ ìœ„í—˜í•  ìˆ˜ ìˆê±°ë‚˜  \nBest Practiceë¥¼ ë”°ë¥´ì§€ ì•Šì€ ê²½ìš°ì—ëŠ” WARNINGì„ ì£¼ê³  ê°œì„ ì ì„ ì œì•ˆí•´.\n\n## ì¤‘ì  ê²€í†  í•­ëª© (Checklist)\n\n### ë³´ì•ˆ ì·¨ì•½ì  (Critical)\nSQL Injection, XSS ê°€ëŠ¥ì„±,  \nì‹¤ì‚¬ìš© ê°€ëŠ¥í•´ ë³´ì´ëŠ” ë¹„ë°€ë²ˆí˜¸ / í‚¤ / í† í° ë…¸ì¶œ  \nì´ëŸ° ê²Œ ë³´ì´ë©´ ë¬´ì¡°ê±´ FAILì´ì•¼.\n\n### ì¹˜ëª…ì  ë…¼ë¦¬ ì˜¤ë¥˜\në¬´í•œ ë£¨í”„, ë¬¸ë²• ì—ëŸ¬, ëª…ë°±í•œ ë¦¬ì†ŒìŠ¤ ëˆ„ìˆ˜  \nì´ëŸ° ê²½ìš°ë„ FAILì´ì•¼.\n\n### ì•ˆì „ì¥ì¹˜ ë¯¸í¡\ntry-catch ëˆ„ë½, ì…ë ¥ê°’ ê²€ì¦ ë¶€ì¬ ê°™ì€ ê±´  \në§¥ë½ì— ë”°ë¼ PASS ë˜ëŠ” WARNINGìœ¼ë¡œ íŒë‹¨í•´.\n\n---\n\n[ê²€ì¦ ëŒ€ìƒ ì •ë³´]\nì§ˆë¬¸: {{ $('Webhook (From MCP)').item.json.body.user_question }}\në‹µë³€: {{ $('Webhook (From MCP)').item.json.body.ai_answer }}\n\n[1ì°¨ ë¶„ì„ ê²°ê³¼ (GPT)]\n{{ $json.message.content }}\n\n---\n\n[ì„ë¬´]\nìœ„ ê¸°ì¤€ì— ë”°ë¼ ê²€ì¦ ê²°ê³¼ë¥¼ ì•„ë˜ í¬ë§·ìœ¼ë¡œ ì‘ì„±.\n\nğŸ“Š [Cross-Verification Result]\n- íŒì •: (PASS / WARNING / FAIL)\n- ìœ„í—˜ë„: (0~100ì , 50ì  ë¯¸ë§Œì€ ì•ˆì „)\n- ê²€ì¶œëœ ì´ìŠˆ: (ê¼­ ìˆ˜ì •ì´ í•„ìš”í•œ ì‚¬í•­ë§Œ ê¸°ìˆ . ì—†ìœ¼ë©´ 'íŠ¹ì´ì‚¬í•­ ì—†ìŒ')\n- ìˆ˜ì • ì œì•ˆ: (ì´ìŠˆê°€ ìˆì„ ê²½ìš°ì—ë§Œ ì‹¤ìš©ì ì¸ ìˆ˜ì • ë°©ì•ˆ ì œì‹œ)"
            }
          ]
        },
        "builtInTools": {},
        "options": {}
      },
      "id": "fde4c669-fd90-4939-a0ed-017aa2e4180b",
      "name": "Gemini Red Team",
      "type": "@n8n/n8n-nodes-langchain.googleGemini",
      "typeVersion": 1.1,
      "position": [
        448,
        0
      ],
      "credentials": {
        "googlePalmApi": {
          "id": "aLGCbcOCiiW8rGQu",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "respondWith": "text",
        "responseBody": "={{ $json.content.parts[0].text }}",
        "options": {}
      },
      "id": "d1ba93c5-859e-4266-87c0-4b34aecb7d84",
      "name": "Respond to Cursor",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [
        672,
        0
      ]
    }
  ],
  "pinData": {},
  "connections": {
    "Webhook (From MCP)": {
      "main": [
        [
          {
            "node": "GPT-4o Analyst",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GPT-4o Analyst": {
      "main": [
        [
          {
            "node": "Gemini Red Team",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gemini Red Team": {
      "main": [
        [
          {
            "node": "Respond to Cursor",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1",
    "availableInMCP": false
  },
  "versionId": "f4cd12a7-98bb-4ba6-be42-868146e0f87e",
  "meta": {
    "instanceId": "078098c40c8d5adc645653392f24bb7e90894c2b1eaabcf0b370740183f7c5b9"
  },
  "id": "6TiGKGs4V-wpkm3fVtVuU",
  "tags": []
}